(function(e){function t(t){for(var s,l,o=t[0],n=t[1],d=t[2],c=0,p=[];c<o.length;c++)l=o[c],r[l]&&p.push(r[l][0]),r[l]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var n=a[o];0!==r[n]&&(s=!1)}s&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},r={app:0},i=[];function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/my-project/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=n;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0ce6":function(e,t,a){"use strict";var s=a("7092"),r=a.n(s);r.a},"1fe8":function(e,t,a){e.exports=a.p+"img/error.png"},2323:function(e,t,a){var s={"./Sidebar.vue":"5ea5","./upFile.vue":"e335"};function r(e){var t=i(e);return a(t)}function i(e){var t=s[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id="2323"},"32f7":function(e,t,a){},"47b9":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("db4d");var s=a("8bbf"),r=a.n(s),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"bounce"}},[a("router-view")],1)],1)},l=[],o={name:"app",watch:{$route(e,t){e.matched.length||this.$router.push("/404")}}},n=o,d=(a("7c55"),a("2877")),u=Object(d["a"])(n,i,l,!1,null,null,null),c=u.exports,p=a("5f72"),m=a.n(p),h=(a("7d05"),a("6389")),f=a.n(h),g=a("5880"),_=a.n(g);r.a.use(_.a);var y=new _.a.Store({state:{data:{}},mutations:{SET_USER_INFO(e,t){"object"===typeof t&&(e.data=t)},SET_USER_KEY_VALUE(e,t){t.hasOwnProperty("key")&&t.hasOwnProperty("value")&&(e.data[t.key]=t.value)}},actions:{set_userInfo:({commit:e},t)=>{e("SET_USER_INFO",t)},set_userInfo_keyValue:({commit:e},t)=>{e("SET_USER_KEY_VALUE",t)}}}),b=a("ed08"),v=a("69b2"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scs-screen login"},[a("el-row",{staticClass:"content"},[a("div",{staticClass:"logo"}),a("el-row",[a("el-form",{ref:"loginForm",attrs:{"label-width":"0px",model:e.data,rules:e.rule_data}},[a("el-form-item",{attrs:{prop:"user_name"}},[a("el-input",{attrs:{type:"text",placeholder:"账号",disabled:e.loading,autofocus:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.data.user_name,callback:function(t){e.$set(e.data,"user_name",t)},expression:"data.user_name"}})],1),a("el-form-item",{attrs:{prop:"pass_word"}},[a("el-input",{attrs:{type:"password",placeholder:"密码",disabled:e.loading},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.data.pass_word,callback:function(t){e.$set(e.data,"pass_word",t)},expression:"data.pass_word"}})],1)],1),a("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.login}},[e._v("登录")]),a("el-button",{attrs:{disabled:e.loading},on:{click:function(t){return e.openReg("register")}}},[e._v("注册")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openReg("retrieve")}}},[e._v("忘记密码")])],1)],1),a("el-dialog",{attrs:{title:e.title[e.type],visible:e.register.visible},on:{"update:visible":function(t){return e.$set(e.register,"visible",t)}}},[a("el-form",{ref:"regForm",attrs:{model:e.form,rules:e.register.rules,"label-width":"80px"}},["register"===e.type?a("el-form-item",{attrs:{label:"帐号",prop:"user_name"}},[a("el-input",{attrs:{placeholder:e.placeholder.name},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1):e._e(),a("el-form-item",{attrs:{label:"邮箱",prop:"user_email"}},[a("el-input",{attrs:{placeholder:e.placeholder.email},model:{value:e.form.user_email,callback:function(t){e.$set(e.form,"user_email",t)},expression:"form.user_email"}})],1),a("el-form-item",{attrs:{label:"register"===e.type?"密码":"新密码",prop:"pass_word"}},[a("el-input",{attrs:{type:"password",placeholder:e.placeholder.pass},model:{value:e.form.pass_word,callback:function(t){e.$set(e.form,"pass_word",t)},expression:"form.pass_word"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"pass_words"}},[a("el-input",{attrs:{type:"password",placeholder:e.placeholder.pass},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.registers(t)}},model:{value:e.form.pass_words,callback:function(t){e.$set(e.form,"pass_words",t)},expression:"form.pass_words"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.register.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.register.loading},on:{click:e.registers}},[e._v("确 定")])],1)],1)],1)},x=[],k={data(){const e=this;return{data:{user_name:"",pass_word:""},placeholder:{name:v["a"].name_txt,pass:v["a"].pass_txt,email:v["a"].email_txt},title:{register:"用户注册",retrieve:"找回密码"},type:"register",loading:!1,rule_data:{user_name:[{required:!0,message:"帐号不能为空！",trigger:"change"},{pattern:v["a"].name_reg,message:v["a"].name_txt,trigger:"change"}],pass_word:[{required:!0,message:"密码不能为空！",trigger:"change"},{pattern:v["a"].pass_reg,message:v["a"].pass_txt,trigger:"change"}]},err:"",register:{visible:!1,loading:!1,rules:{user_name:[{required:!0,message:"用户帐号不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].name_reg.test(a)?e.err.includes("帐号")?s(new Error(e.err)):s():s(new Error(v["a"].name_txt))},trigger:"change"}],pass_word:[{required:!0,message:"密码不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].pass_reg.test(a)?(e.form.pass_words&&e.$refs.regForm.validateField("pass_words"),s()):s(new Error(v["a"].pass_txt))},trigger:"change"}],pass_words:[{required:!0,message:"确认密码不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].pass_reg.test(a)?e.form.pass_word!==e.form.pass_words?s(new Error("密码与确认密码不相同！")):s():s(new Error(v["a"].pass_txt))},trigger:"change"}],user_email:[{required:!0,message:"邮箱不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].email_reg.test(a)?e.err.includes("邮箱")?s(new Error(e.err)):s():s(new Error(v["a"].email_txt))},trigger:"change"}]}},form:{user_name:"",pass_word:"",pass_words:"",user_email:""}}},mounted(){b["a"].storage.remove("userInfo");let e=this.$route.query.active||this.$route.query.find;if(e&&v["a"].deal_results.hasOwnProperty(e)){let t=this.$route.query.active?"激活用户":"密码找回";this.$notify({title:"系统通知",duration:1e4,message:v["a"].deal_results[e].replace("#",t),type:"success"===e?"success":"error"})}},methods:{registers(){this.$refs.regForm.validate(e=>{e&&this.$confirm("确定要"+this.title[this.type]+"？注意：操作后需要邮箱激活帐号！","系统提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.register.loading=!0,b["a"].ajax.call(this,"/"+this.type,this.form,(e,t)=>{if(this.register.loading=!1,t)this.err=t,(t.includes("帐号")||t.includes("邮箱"))&&this.$refs.regForm.validateField(t.includes("帐号")?"user_name":"user_email");else{this.register.visible=!1;let t="register"===this.type?"注册用户":"找回密码";this.$message({message:(e.emailErr?"#成功。但激活邮件发送失败，请联系管理员！":"恭喜您#成功,请登录邮箱激活帐号！").replace("#",t),type:e.emailErr?"warning":"success"})}})}).catch(()=>{})})},openReg(e){this.$refs.regForm&&this.$refs.regForm.resetFields(),this.type=e,this.register.visible=!0},login(){this.$refs.loginForm.validate(e=>{e&&!this.loading&&(this.loading=!0,b["a"].ajax.call(this,"/login",this.data,(e,t)=>{this.loading=!1,t||b["a"].storage.set("userInfo",e,()=>{let e=this.$route.query.url;e=e&&!e.includes("login")?e:"/data/list",this.$router.replace(e)})}))})}},watch:{"form.user_name"(){this.err.includes("帐号")&&(this.err="")},"form.user_email"(){this.err.includes("邮箱")&&(this.err="")}}},$=k,U=(a("ab55"),Object(d["a"])($,w,x,!1,null,null,null)),C=U.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n    404页面没找到！\n")])},S=[],F={},E=F,I=(a("0ce6"),Object(d["a"])(E,j,S,!1,null,"6ce9d67c",null)),O=I.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home",class:{homeClose:e.isCollapse},on:{click:e.homeClick}},[a("el-dialog",{attrs:{title:"更新头像",visible:e.upUserPic.visible},on:{"update:visible":function(t){return e.$set(e.upUserPic,"visible",t)}},nativeOn:{click:function(e){e.stopPropagation()}}},[a("el-form",{ref:"picForm",attrs:{model:e.upUserPic,rules:e.upUserPic.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图片地址",prop:"pic"}},[a("el-input",{model:{value:e.upUserPic.pic,callback:function(t){e.$set(e.upUserPic,"pic",t)},expression:"upUserPic.pic"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("up-file",{ref:"upload",attrs:{upload:{}},on:{successUpload:e.successUpload}}),a("el-button",{staticStyle:{float:"left"},attrs:{disabled:e.grade.upFile},on:{click:e.upImg}},[e._v("上传图片")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.upUserPic.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.upUserImg}},[e._v("确 定")])],1)],1),a("div",{staticClass:"el-row"},[a("div",{staticClass:"el-col top_right"},[a("p",{on:{click:function(t){return t.stopPropagation(),e.showUserInfo(t)}}}),a("div",{staticClass:"user_info",on:{click:function(e){e.stopPropagation()}}},[a("dl",{staticClass:"clearfix"},[a("dt",{on:{click:e.upPic}}),a("dd",[e._v("帐号："+e._s(e.userInfo.user_name))]),a("dd",[e._v("角色："+e._s(e.getUserType))]),a("dd",[e._v("邮箱："+e._s(e.userInfo.user_email))])]),a("el-button",{attrs:{type:"primary"},on:{click:e.loginOut}},[e._v("退出系统")]),a("el-button",{attrs:{disabled:e.grade.changePassword},on:{click:e.showChange}},[e._v("修改密码")])],1)]),a("div",{staticClass:"el-col top_left"}),a("div",{staticClass:"el-col el-col-1 close-col"},[a("i",{class:"el-icon-d-arrow-"+(e.isCollapse?"right":"left"),on:{click:function(t){e.isCollapse=!e.isCollapse}}})]),a("div",{staticClass:"el-col el-col-1",staticStyle:{width:"calc(100% - 440px)"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.headerCurRouter,"background-color":"#054572","text-color":"#fff","active-text-color":"#ffd04b",mode:"horizontal",router:""}},[e._l(e.getMenu,function(t){return t.meta.show?[t.meta.showSub?a("el-submenu",{key:t.path,attrs:{index:t.path}},[a("template",{slot:"title"},[e._v(e._s(t.meta.title))]),e._l(t.children,function(s){return s.meta.show?a("el-menu-item",{key:s.path,attrs:{index:t.path+"/"+s.path}},[e._v("\n              "+e._s(s.meta.title)+"\n            ")]):e._e()})],2):t.meta.show?a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.meta.title)+"\n          ")]):e._e()]:e._e()})],2)],1)]),a("div",{staticClass:"menu"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.headerCurRouter,"background-color":"#eef1f6",collapse:e.isCollapse,router:!0}},[e._l(e.getMenu,function(t){return t.meta.show?[t.meta.showSub?a("el-submenu",{key:t.path,attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{class:t.meta.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.title))])]),a("el-menu-item-group",e._l(t.children,function(s){return s.meta.show?a("el-menu-item",{key:s.path,attrs:{index:t.path+"/"+s.path}},[a("i",{class:s.meta.icon}),e._v("\n              "+e._s(s.meta.title)+"\n            ")]):e._e()}),1)],2):t.meta.show?a("el-menu-item",{key:t.path,attrs:{index:t.path}},[a("i",{class:t.meta.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.title))])]):e._e()]:e._e()})],2)],1),a("div",{staticClass:"content"},[a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.routes,function(t){return a("el-breadcrumb-item",{key:t.path,attrs:{to:{path:t.path}}},[e._v(e._s(t.meta.title)+"\n        ")])}),1),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)]),a("el-dialog",{attrs:{title:"修改密码",visible:e.password.visible},on:{"update:visible":function(t){return e.$set(e.password,"visible",t)}}},[a("el-form",{ref:"password",attrs:{model:e.password.form,rules:e.password.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"old_password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.password.form.old_password,callback:function(t){e.$set(e.password.form,"old_password",t)},expression:"password.form.old_password"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"pass_word"}},[a("el-input",{attrs:{type:"password"},model:{value:e.password.form.pass_word,callback:function(t){e.$set(e.password.form,"pass_word",t)},expression:"password.form.pass_word"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"pass_words"}},[a("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changePassword(t)}},model:{value:e.password.form.pass_words,callback:function(t){e.$set(e.password.form,"pass_words",t)},expression:"password.form.pass_words"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.password.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.password.loading},on:{click:e.changePassword}},[e._v("确 定")])],1)],1)],1)},T=[];let z=["./index.js","./public.js"];const D=a("2323");D.keys().forEach(e=>{if(!z.includes(e)){const t=D(e),a=e.replace(/.+?(\w)(\w+)\.vue/i,(e,t,a)=>{return t.toUpperCase()+a});r.a.component(a,t.default||t)}});const q={start:null,div:null,obj:null,parameter:{delay:0,endDelay:0,fill:"forwards",iterations:1,duration:500,direction:"normal",easing:"ease-in"},keyframes:[{offset:0,opacity:0,filter:"blur(40px)",transformOrigin:"50% 0",transform:"perspective(800px) rotateY(-180deg) translateZ(150px)"},{offset:1,opacity:1,filter:"blur(0px)",transformOrigin:"0 0",transform:"perspective(800px) rotateY(0deg) translate3d(0px,0px,0px)"}]};var B={name:"home",data(){const e=this;return{page_grade:v["a"].page_grade,grade:{changePassword:!0,upFile:!0},userInfo:{},upUserPic:{visible:!1,pic:"",rules:{pic:{required:!0,pattern:v["a"].pic_reg,message:v["a"].pic_txt,trigger:"change"}}},isCollapse:!1,headerCurRouter:"",routes:[],menu:this.$router.options.routes,password:{visible:!1,loading:!1,form:{old_password:"",pass_word:"",pass_words:""},rules:{old_password:[{required:!0,message:"旧密码不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].pass_reg.test(a)?(e.password.form.pass_word&&e.$refs.password.validateField("pass_word"),s()):s(new Error(v["a"].pass_txt))},trigger:"change"}],pass_word:[{required:!0,message:"新密码不能为空！",trigger:"change"},{validator:(t,a,s)=>{let r=e.password.form;v["a"].pass_reg.test(a)?r.old_password===r.pass_word?s(new Error("新密码不能与旧密码相同！")):(r.pass_words&&e.$refs.password.validateField("pass_words"),s()):s(new Error(v["a"].pass_txt))},trigger:"change"}],pass_words:[{required:!0,message:"确认密码不能为空！",trigger:"change"},{validator:(t,a,s)=>{let r=e.password.form;v["a"].pass_reg.test(a)?r.pass_word!==r.pass_words?s(new Error("新密码与确认密码不相同！")):s():s(new Error(v["a"].pass_txt))},trigger:"change"}]}}}},computed:{getMenu(){let e=this.$router.options.routes;const t=["/","*","/login","edit/:id"];return e.forEach(e=>{e.meta=e.meta||{},e.meta.show=!t.includes(e.path);let a=0;e.children&&e.children.forEach(e=>{e.meta=e.meta||{},e.meta.show=(a++,!t.includes(e.path))}),e.meta.showSub=e.meta.show&&a>0}),e},getUserType(){return v["a"].user_type[this.userInfo.user_type]||"未知"}},mounted(){q.start=void 0!==window.Element.prototype.animate?"off":null,this.updateCurMenu(),b["a"].storage.get("userInfo",e=>{this.$store.dispatch("set_userInfo",e.userInfo),this.userInfo=e.userInfo,this.setUserInfo()})},methods:{upPic(){this.upUserPic.visible=!0,this.$refs.picForm&&this.$refs.picForm.resetFields()},upImg(){this.$refs.upload.SelectFile()},upUserImg(){this.$refs.picForm.validate(e=>{e&&b["a"].ajax.call(this,"/upUserPic",{pic:this.upUserPic.pic},(e,t)=>{t||(b["a"].storage.get("userInfo",t=>{t.userInfo.user_pic=e.pic,b["a"].storage.set("userInfo",t),Array.from(document.querySelectorAll(".top_right p,.user_info dt")).forEach(t=>{t.style.backgroundImage="url("+e.pic+")",t.textContent=""})}),this.upUserPic.visible=!1)})})},successUpload(e){this.upUserPic.pic=e.filename},homeClick(){q.div&&(q.div.style.opacity=0),"on"===q.start&&(q.parameter.fill="backwards",q.start="off",q.obj.reverse())},showChange(){this.password.visible=!0,this.$refs.password&&this.$refs.password.resetFields()},changePassword(){this.$refs.password.validate(e=>{e&&(this.password.loading=!0,b["a"].ajax.call(this,"/changePassword",this.password.form,(e,t)=>{this.password.loading=!1,t||(this.$message({message:"密码修改成功！请记住新密码。",type:"success"}),b["a"].storage.remove("userInfo"),this.$router.push("/login"))}))})},loginOut(){b["a"].storage.remove("userInfo"),this.$router.push("/login")},showUserInfo(){q.div=document.querySelector(".user_info"),q.div.style.opacity=1,q.div.style.top="60px","off"===q.start&&(q.start="on",q.parameter.fill="forwards",q.obj=q.div.animate(q.keyframes,q.parameter),q.obj.addEventListener("finish",()=>{q.div.style.top="on"===q.start?"60px":"-200px"},!1))},setUserInfo(){let e=document.querySelectorAll(".top_right p,.user_info dt");if(e.length){const t=this.userInfo;let a=t.user_name.replace(/[a-z]+/g,"");a=a?a.slice(0,1):t.user_name.slice(0,2),Array.from(e).forEach(e=>{e.removeAttribute("style"),e.style.backgroundColor="#f60",e.style.color="#fff",t.user_pic?(e.style.backgroundImage="url("+t.user_pic+")",e.style.textContent=""):e.textContent=a.toUpperCase()})}},updateCurMenu(e){if(e=e||this.$route,e.matched.length){this.routes=e.matched;let t="";e.matched.forEach(e=>{t+=e.meta.title+" - "}),this.headerCurRouter=e.path,document.title=t+v["a"].web_name}else this.$router.push("/*"),this.headerCurRouter="/404",document.title="404 - "+v["a"].web_name}},mixins:[v["a"].mixin],watch:{$route(e){this.updateCurMenu(e)}}},M=B,R=(a("efed"),Object(d["a"])(M,P,T,!1,null,null,null)),A=R.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-article"},[a("el-form",{ref:"form",attrs:{model:e.data,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户帐号",prop:"user_name"}},[a("el-input",{attrs:{disabled:e.data.id>0},model:{value:e.data.user_name,callback:function(t){e.$set(e.data,"user_name",t)},expression:"data.user_name"}})],1),a("el-form-item",{attrs:{label:"用户密码",prop:"pass_word"}},[a("el-input",{attrs:{type:"password"},model:{value:e.data.pass_word,callback:function(t){e.$set(e.data,"pass_word",t)},expression:"data.pass_word"}})],1),a("el-form-item",{attrs:{label:"用户邮箱",prop:"user_email"}},[a("el-input",{attrs:{disabled:e.data.id>0},model:{value:e.data.user_email,callback:function(t){e.$set(e.data,"user_email",t)},expression:"data.user_email"}})],1),a("el-form-item",{attrs:{label:"用户类型",prop:"user_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.data.user_type,callback:function(t){e.$set(e.data,"user_type",t)},expression:"data.user_type"}},e._l(e.user_type,function(t,s){return"0"===s||s>e.userInfo.user_type?a("el-option",{key:s,attrs:{label:t,value:s}}):e._e()}),1)],1),a("el-form-item",{attrs:{label:"用户头像",prop:"user_pic"}},[a("el-input",{model:{value:e.data.user_pic,callback:function(t){e.$set(e.data,"user_pic",t)},expression:"data.user_pic"}}),a("up-file",{ref:"upload",attrs:{upload:{disabled:e.grade.upFile}},on:{successUpload:e.successUpload}}),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{disabled:e.grade.upFile},on:{click:e.upImg}},[e._v("上传图片")])],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:e.backList}},[e._v("返回列表")]),a("el-button",{attrs:{type:"primary",disabled:e.grade.updateUser||e.loading},on:{click:e.saveUser}},[e._v("保存用户")])],1)],1)],1)},N=[],W={name:"list",data(){const e=this;return{page_grade:v["a"].page_grade,grade:{updateUser:!0,upFile:!0},userInfo:{user_type:"4"},user_type:v["a"].user_type,loading:!1,err:"",data:{id:0,user_name:"",pass_word:"",user_email:"",user_type:"0",user_pic:""},rules:{user_name:[{required:!0,message:"用户帐号不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].name_reg.test(a)?e.err.includes("帐号")?s(new Error(e.err)):s():s(new Error(v["a"].name_txt))},trigger:"change"}],pass_word:[{required:!0,message:"密码不能为空！",trigger:"change"},{pattern:v["a"].pass_reg,message:v["a"].pass_txt,trigger:"change"}],user_email:[{required:!0,message:"邮箱不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].email_reg.test(a)?e.err.includes("邮箱")?s(new Error(e.err)):s():s(new Error(v["a"].email_txt))},trigger:"change"}],user_type:[{required:!0,message:"请选择用户类型",trigger:"change"}]}}},methods:{saveUser(){this.$refs.form.validate(e=>{e&&(this.data.article_extend=JSON.stringify({pic:this.data.pic}),b["a"].ajax.call(this,"/updateUser",this.data,(e,t)=>{this.loading=!1,t?(this.err=t,(t.includes("帐号")||t.includes("邮箱"))&&this.$refs.form.validateField(t.includes("帐号")?"user_name":"user_email")):(this.$message({message:"保存成功",type:"success"}),this.$router.push("/user/list"))}))})},upImg(){this.$refs.upload.SelectFile()},backList(){this.$router.push("/user/list")},successUpload(e){this.data.user_pic=e.filename}},mounted(){let e=this.$route.params.id;e&&b["a"].ajax.call(this,"/getUserById",{id:e},(e,t)=>{t||(Object.getOwnPropertyNames(this.data).forEach(t=>{"pass_word"!==t&&(this.data[t]=e[t]+"")}),this.data.pass_word=v["a"].defaultPassword,this.userInfo.user_type>=this.data.user_type&&(t="超越权限！",this.$message({message:t,type:"error"}))),t&&this.$router.go(-1)})},watch:{"data.user_name"(){this.err.includes("帐号")&&(this.err="")},"data.user_email"(){this.err.includes("邮箱")&&(this.err="")}},mixins:[v["a"].mixin]},V=W,J=Object(d["a"])(V,L,N,!1,null,null,null),Y=J.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"grid-table"},[a("el-form",{attrs:{inline:!0,model:e.search_data}},[a("el-form-item",{attrs:{label:"帐号"}},[a("el-input",{model:{value:e.search_data.user_name,callback:function(t){e.$set(e.search_data,"user_name",t)},expression:"search_data.user_name"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.search_data.user_email,callback:function(t){e.$set(e.search_data,"user_email",t)},expression:"search_data.user_email"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{model:{value:e.search_data.user_type,callback:function(t){e.$set(e.search_data,"user_type",t)},expression:"search_data.user_type"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.user_type,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})],2)],1),a("el-form-item",[a("el-button",{attrs:{icon:"search",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{icon:"plus",disabled:e.grade.updateUser},on:{click:e.add}},[e._v("添加用户")])],1)],1),a("el-button",{attrs:{type:"danger",disabled:e.grade.deleteUser},on:{click:function(t){return e.deleteUser()}}},[e._v("批量删除")]),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",border:"",data:e.table_data.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"55"}}),e._l(e.table_data.columns,function(t){return a("el-table-column",{key:t.key,attrs:{"show-overflow-tooltip":"",label:t.name,prop:t.key,formatter:e.columnFormatter,"min-width":t.minWidth,width:t.width}})})],2),a("el-pagination",{attrs:{"current-page":e.search_data.page,"page-size":e.search_data.pageSize,layout:"total, prev, pager, next,jumper",total:e.table_data.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},H=[],Z={name:"list",data(){return{userType:4,page_grade:v["a"].page_grade,grade:{listUser:!0,updateUser:!0,passedUser:!0,deleteUser:!0},user_type:v["a"].user_type,search_data:{user_name:"",user_type:"",user_email:"",pageSize:10,page:1},multipleSelection:[],table_data:{columns:[{key:"user_name",name:"用户帐号",width:150},{key:"user_email",name:"用户邮箱",minWidth:120},{key:"user_type",name:"用户类型",width:120},{key:"create_time",name:"注册时间",width:150},{key:"operations",name:"操作",width:135}],total:0,data:[]}}},methods:{ajaxData(){b["a"].ajax.call(this,"/listUser",this.search_data,(e,t)=>{t||(this.table_data.data=e.data,this.table_data.total=e.total,this.search_data.page=e.page)})},onSearch(){this.search_data.page=1,this.ajaxData()},handleCurrentChange(e){e!==this.search_data.page&&(this.search_data.page=e,this.ajaxData())},selectable(e){return!this.grade.deleteUser&&(0===e.user_type||this.userType<e.user_type)},createButton(e,t,a,s){let r=this,i=!1;return"delete"===a?i=!this.selectable(t):"edit"===a?i=this.userType>=t.user_type||this.grade.updateUser:"passed"===a&&(i=this.grade.passedUser),e("el-button",{props:{size:"small",disabled:i},on:{click(){r.healColumnClick(a,t)}}},[s])},columnFormatter(e,t){let a=t.property,s=e[a]+"",r=this.$createElement;if("create_time"===a)s=s.replace(/[^-\d].+/,"");else{if("operations"===a)return r("div",[this.createButton(r,e,"edit","编辑"),this.createButton(r,e,"delete","删除")]);if("user_type"===a){if("0"===s)return this.createButton(r,e,"passed","通过");s=v["a"].user_type[s]||"未知"}}return s},deleteUser(e){if(!e){if(!this.multipleSelection.length)return this.$message("请先选择用户");e=this.multipleSelection}this.$confirm(`确定要${e.length>1?"批量删除用户":"删除此用户"}吗？`,"系统提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b["a"].ajax.call(this,"/deleteUser",{ids:e.map(e=>e.id).join(",")},(e,t)=>{!t&&this.ajaxData()})}).catch(()=>{})},passedUser(e){b["a"].ajax.call(this,"/passedUser",{ids:e.map(e=>e.id).join(",")},(t,a)=>{a||e.forEach(e=>{e.user_type=t.passed})})},add(){this.$router.push("/user/add")},handleSelectionChange(e){this.multipleSelection=e},healColumnClick(e,t){"edit"===e?this.$router.push("/user/edit/"+t.id):"passed"===e?this.passedUser([t]):"delete"===e&&this.deleteUser([t])}},mounted(){b["a"].storage.get("userInfo",e=>{this.userType=e.userInfo.user_type}),this.ajaxData()},mixins:[v["a"].mixin]},G=Z,Q=(a("f640"),Object(d["a"])(G,K,H,!1,null,null,null)),X=Q.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-table"},[a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"danger",disabled:e.grade.delFile},on:{click:e.batchesDelFiles}},[e._v("批量删除\n  ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:e.table_data.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.selectable}}),e._l(e.table_data.columns,function(t){return a("el-table-column",{key:t.key,attrs:{"show-overflow-tooltip":"",label:t.name,prop:t.key,formatter:e.columnFormatter,"min-width":t.minWidth,width:t.width}})})],2),a("el-pagination",{attrs:{"current-page":e.search_data.page,"page-size":e.search_data.pageSize,layout:"total, prev, pager, next,jumper",total:e.table_data.total},on:{"current-change":e.handleCurrentChange}})],1)},te=[],ae={name:"list",data(){return{page_grade:v["a"].page_grade,grade:{delFile:!0},search_data:{page:1,pageSize:10},errPic:a("1fe8"),multipleSelection:[],table_data:{columns:[{key:"file_name",name:"文件名称",minWidth:100},{key:"user_name",name:"上传者",width:80},{key:"file_path",name:"文件路径",minWidth:120},{key:"mime_type",name:"文件类型",width:100},{key:"file_size",name:"文件大小KB",width:120},{key:"create_time",name:"上传时间",minWidth:100},{key:"operations",name:"操作",width:158}],total:0,data:[]}}},methods:{batchesDelFiles(){if(this.multipleSelection.length){let e=this.multipleSelection.map(e=>e.id).join(",");this.$confirm("确定要批量删除文件和记录吗？","系统提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b["a"].ajax.call(this,"/delFile",{id:e,delRecord:!0},(e,t)=>{t||this.ajaxData()})}).catch(()=>{})}else this.$message("请先选择文件")},selectable(){return!this.grade.delFile},handleSelectionChange(e){this.multipleSelection=e},createButton(e,t,a,s){let r=this;const i=[s];return e("el-button",{props:{size:"small"},on:{click(){r.healColumnClick(a,t)}}},i)},columnFormatter(e,t){let a=t.property,s=e[a]||"",r=this.$createElement,i=this;if("file_size"===a)s=(s/1024).toFixed(2)+"KB";else{if("file_name"===a)return r("div",[r("el-popover",{ref:"pop",attrs:{placement:"top",trigger:"hover"}},[r("img",{style:"max-width:400px",attrs:{src:e.full_path},on:{error:()=>{e.full_path=i.errPic}}})]),r("div",{directives:[{name:"popover",rawName:"v-popover:pop",arg:"pop"}]},e[a])]);if("create_time"===a)s=s.replace(/[^-\d].+/,"");else if("operations"===a){let t=(e,t,a)=>{return r("el-button",{props:{size:"small",disabled:i.grade.delFile||"delFile"===t&&1===e.is_delete},on:{click:()=>{i.headleClick(t,e)}}},a)};return r("div",[t(e,"delFile","删文件"),t(e,"delFileAll","全删除")])}}return s},headleClick(e,t){this.$confirm(`确定要删除文件${"delFile"===e?"":"和记录"}吗？`,"系统提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b["a"].ajax.call(this,"/delFile",{id:t.id,delRecord:"delFileAll"===e},(a,s)=>{s||("delFileAll"===e?this.ajaxData():t.is_delete=1)})}).catch(()=>{})},ajaxData(){b["a"].ajax.call(this,"/listUpFile",this.search_data,(e,t)=>{t||(this.table_data.data=e.data,this.table_data.total=e.total,this.search_data.page=e.page)})},handleCurrentChange(e){e!==this.search_data.page&&(this.search_data.page=e,this.ajaxData())}},mounted(){this.ajaxData()},mixins:[v["a"].mixin]},se=ae,re=Object(d["a"])(se,ee,te,!1,null,null,null),ie=re.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"grid-table"},[a("el-form",{attrs:{inline:!0,model:e.search_data}},[a("el-form-item",{attrs:{label:"帐号"}},[a("el-input",{model:{value:e.search_data.user_name,callback:function(t){e.$set(e.search_data,"user_name",t)},expression:"search_data.user_name"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.search_data.user_email,callback:function(t){e.$set(e.search_data,"user_email",t)},expression:"search_data.user_email"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{model:{value:e.search_data.user_type,callback:function(t){e.$set(e.search_data,"user_type",t)},expression:"search_data.user_type"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.user_type,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})],2)],1),a("el-form-item",[a("el-button",{attrs:{icon:"search",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{icon:"plus",disabled:e.grade.updateUser},on:{click:e.add}},[e._v("添加用户")])],1)],1),a("el-button",{attrs:{type:"danger",disabled:e.grade.deleteUser},on:{click:function(t){return e.deleteUser()}}},[e._v("批量删除")]),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{stripe:"",border:"",data:e.table_data.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"55"}}),e._l(e.table_data.columns,function(t){return a("el-table-column",{key:t.key,attrs:{"show-overflow-tooltip":"",label:t.name,prop:t.key,formatter:e.columnFormatter,"min-width":t.minWidth,width:t.width}})})],2),a("el-pagination",{attrs:{"current-page":e.search_data.page,"page-size":e.search_data.pageSize,layout:"total, prev, pager, next,jumper",total:e.table_data.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},oe=[],ne={name:"list",data(){return{userType:4,page_grade:v["a"].page_grade,grade:{listUser:!0,updateUser:!0,passedUser:!0,deleteUser:!0},user_type:v["a"].user_type,search_data:{user_name:"",user_type:"",user_email:"",pageSize:10,page:1},multipleSelection:[],table_data:{columns:[{key:"user_name",name:"用户帐号",width:150},{key:"user_email",name:"用户邮箱",minWidth:120},{key:"user_type",name:"用户类型",width:120},{key:"create_time",name:"注册时间",width:150},{key:"operations",name:"操作",width:135}],total:0,data:[]}}},methods:{ajaxData(){b["a"].ajax.call(this,"/listUser",this.search_data,(e,t)=>{t||(this.table_data.data=e.data,this.table_data.total=e.total,this.search_data.page=e.page)})},onSearch(){this.search_data.page=1,this.ajaxData()},handleCurrentChange(e){e!==this.search_data.page&&(this.search_data.page=e,this.ajaxData())},selectable(e){return!this.grade.deleteUser&&(0===e.user_type||this.userType<e.user_type)},createButton(e,t,a,s){let r=this,i=!1;return"delete"===a?i=!this.selectable(t):"edit"===a?i=this.userType>=t.user_type||this.grade.updateUser:"passed"===a&&(i=this.grade.passedUser),e("el-button",{props:{size:"small",disabled:i},on:{click(){r.healColumnClick(a,t)}}},[s])},columnFormatter(e,t){let a=t.property,s=e[a]+"",r=this.$createElement;if("create_time"===a)s=s.replace(/[^-\d].+/,"");else{if("operations"===a)return r("div",[this.createButton(r,e,"edit","编辑"),this.createButton(r,e,"delete","删除")]);if("user_type"===a){if("0"===s)return this.createButton(r,e,"passed","通过");s=v["a"].user_type[s]||"未知"}}return s},deleteUser(e){if(!e){if(!this.multipleSelection.length)return this.$message("请先选择用户");e=this.multipleSelection}this.$confirm(`确定要${e.length>1?"批量删除用户":"删除此用户"}吗？`,"系统提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b["a"].ajax.call(this,"/deleteUser",{ids:e.map(e=>e.id).join(",")},(e,t)=>{!t&&this.ajaxData()})}).catch(()=>{})},passedUser(e){b["a"].ajax.call(this,"/passedUser",{ids:e.map(e=>e.id).join(",")},(t,a)=>{a||e.forEach(e=>{e.user_type=t.passed})})},add(){this.$router.push("/user/add")},handleSelectionChange(e){this.multipleSelection=e},healColumnClick(e,t){"edit"===e?this.$router.push("/user/edit/"+t.id):"passed"===e?this.passedUser([t]):"delete"===e&&this.deleteUser([t])}},mounted(){b["a"].storage.get("userInfo",e=>{this.userType=e.userInfo.user_type}),this.ajaxData()},mixins:[v["a"].mixin]},de=ne,ue=(a("9b5e"),Object(d["a"])(de,le,oe,!1,null,null,null)),ce=ue.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-article"},[a("el-form",{ref:"form",attrs:{model:e.data,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户帐号",prop:"user_name"}},[a("el-input",{attrs:{disabled:e.data.id>0},model:{value:e.data.user_name,callback:function(t){e.$set(e.data,"user_name",t)},expression:"data.user_name"}})],1),a("el-form-item",{attrs:{label:"用户密码",prop:"pass_word"}},[a("el-input",{attrs:{type:"password"},model:{value:e.data.pass_word,callback:function(t){e.$set(e.data,"pass_word",t)},expression:"data.pass_word"}})],1),a("el-form-item",{attrs:{label:"用户邮箱",prop:"user_email"}},[a("el-input",{attrs:{disabled:e.data.id>0},model:{value:e.data.user_email,callback:function(t){e.$set(e.data,"user_email",t)},expression:"data.user_email"}})],1),a("el-form-item",{attrs:{label:"用户类型",prop:"user_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.data.user_type,callback:function(t){e.$set(e.data,"user_type",t)},expression:"data.user_type"}},e._l(e.user_type,function(t,s){return"0"===s||s>e.userInfo.user_type?a("el-option",{key:s,attrs:{label:t,value:s}}):e._e()}),1)],1),a("el-form-item",{attrs:{label:"用户头像",prop:"user_pic"}},[a("el-input",{model:{value:e.data.user_pic,callback:function(t){e.$set(e.data,"user_pic",t)},expression:"data.user_pic"}}),a("up-file",{ref:"upload",attrs:{upload:{disabled:e.grade.upFile}},on:{successUpload:e.successUpload}}),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{disabled:e.grade.upFile},on:{click:e.upImg}},[e._v("上传图片")])],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:e.backList}},[e._v("返回列表")]),a("el-button",{attrs:{type:"primary",disabled:e.grade.updateUser||e.loading},on:{click:e.saveUser}},[e._v("保存用户")])],1)],1)],1)},me=[],he={name:"list",data(){const e=this;return{page_grade:v["a"].page_grade,grade:{updateUser:!0,upFile:!0},userInfo:{user_type:"4"},user_type:v["a"].user_type,loading:!1,err:"",data:{id:0,user_name:"",pass_word:"",user_email:"",user_type:"0",user_pic:""},rules:{user_name:[{required:!0,message:"用户帐号不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].name_reg.test(a)?e.err.includes("帐号")?s(new Error(e.err)):s():s(new Error(v["a"].name_txt))},trigger:"change"}],pass_word:[{required:!0,message:"密码不能为空！",trigger:"change"},{pattern:v["a"].pass_reg,message:v["a"].pass_txt,trigger:"change"}],user_email:[{required:!0,message:"邮箱不能为空！",trigger:"change"},{validator:(t,a,s)=>{v["a"].email_reg.test(a)?e.err.includes("邮箱")?s(new Error(e.err)):s():s(new Error(v["a"].email_txt))},trigger:"change"}],user_type:[{required:!0,message:"请选择用户类型",trigger:"change"}]}}},methods:{saveUser(){this.$refs.form.validate(e=>{e&&(this.data.article_extend=JSON.stringify({pic:this.data.pic}),b["a"].ajax.call(this,"/updateUser",this.data,(e,t)=>{this.loading=!1,t?(this.err=t,(t.includes("帐号")||t.includes("邮箱"))&&this.$refs.form.validateField(t.includes("帐号")?"user_name":"user_email")):(this.$message({message:"保存成功",type:"success"}),this.$router.push("/user/list"))}))})},upImg(){this.$refs.upload.SelectFile()},backList(){this.$router.push("/user/list")},successUpload(e){this.data.user_pic=e.filename}},mounted(){let e=this.$route.params.id;e&&b["a"].ajax.call(this,"/getUserById",{id:e},(e,t)=>{t||(Object.getOwnPropertyNames(this.data).forEach(t=>{"pass_word"!==t&&(this.data[t]=e[t]+"")}),this.data.pass_word=v["a"].defaultPassword,this.userInfo.user_type>=this.data.user_type&&(t="超越权限！",this.$message({message:t,type:"error"}))),t&&this.$router.go(-1)})},watch:{"data.user_name"(){this.err.includes("帐号")&&(this.err="")},"data.user_email"(){this.err.includes("邮箱")&&(this.err="")}},mixins:[v["a"].mixin]},fe=he,ge=Object(d["a"])(fe,pe,me,!1,null,null,null),_e=ge.exports,ye={mode:"history",base:"/my-project/",routes:[{path:"*",name:"/404",component:O},{path:"/",redirect:"/login"},{path:"/login",name:"login",meta:{title:"登录"},component:C},{path:"/data",meta:{verify:!0,title:"污水管理",icon:"fa fa-file-text-o"},component:A,redirect:"/data/list",children:[{path:"list",meta:{verify:!0,grade:v["a"].page_grade.listArticle,title:"公司列表",icon:"fa fa-newspaper-o"},component:X},{path:"add",meta:{verify:!0,title:"添加公司",icon:"fa fa-clone"},component:Y},{path:"edit/:id",meta:{verify:!0,title:"信息修改",icon:"fa fa-clone"},component:_e}]},{path:"/user",meta:{verify:!0,title:"用户管理",icon:"fa fa-user-o"},redirect:"/user/list",component:A,children:[{path:"list",meta:{verify:!0,grade:v["a"].page_grade.userList,title:"用户列表",icon:"fa fa-address-card-o"},component:ce},{path:"add",meta:{verify:!0,grade:v["a"].page_grade.updateUser,title:"添加用户",icon:"fa fa-user-plus"},component:_e},{path:"edit/:id",meta:{verify:!0,title:"编辑用户",icon:"fa fa-user-times"},component:_e}]},{path:"/upfile",meta:{verify:!0,title:"上传管理",icon:"fa fa-upload"},component:A,redirect:"/upfile/list",children:[{path:"list",meta:{verify:!0,grade:v["a"].page_grade.listUpFile,title:"上传列表",icon:"fa fa-files-o"},component:ie}]}]},be=a("323e"),ve=a.n(be);a("a5d8");r.a.use(_.a),r.a.use(m.a,{size:"small"}),r.a.use(f.a);const we=new f.a(ye);we.beforeEach((e,t,a)=>{window.scroll(0,0),ve.a.start(),b["a"].storage.get("userInfo",t=>{e.meta.verify&&!t.token?(r.a.prototype.$message({message:"无权访问，请先登录！",type:"warning"}),a({path:"/login",query:{url:e.fullPath}})):e.meta.grade&&e.meta.grade<t.userInfo.user_type?(r.a.prototype.$message({message:"无权访问此页面！",type:"warning"}),ve.a.done()):"/login"===e.path&&t.token?a({path:"/data/list"}):a()})}),we.afterEach(()=>{ve.a.done()}),new r.a({router:we,store:y,render:e=>e(c)}).$mount("#app")},5880:function(e,t){e.exports=Vuex},"5c48":function(e,t,a){},"5d2d":function(e,t,a){"use strict";a.r(t);class s{constructor(){this.storage=window.localStorage,this.prefix="scscms_"}set(e,t,a){if("string"!==typeof t)try{t=JSON.stringify(t)}catch(s){}this.storage.setItem(this.prefix+e,t),"function"===typeof a&&a()}get(e,t){let a=this.storage.getItem(this.prefix+e);try{a=JSON.parse(a),null===a&&(a={})}catch(s){a={}}return"function"===typeof t?t.call(this,a):a}remove(e){this.storage.removeItem(this.prefix+e)}}t["default"]=new s},"5ea5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.sidebar,e.slide_class]},[a("div",{staticClass:"sidebar_div"},[a("div",{staticClass:"el-message-box__header"},[a("div",{staticClass:"el-message-box__title"},[e._t("title")],2),a("i",{staticClass:"el-message-box__close el-icon-close",on:{click:e.close}})]),e._t("content",[a("div",{staticClass:"sidebar_content"})]),e._t("foot",[a("div",{staticClass:"sidebar_foot"})])],2),a("div",{staticClass:"sidebar_bg",on:{click:e.close}})])},r=[],i={name:"Sidebar",props:{str:{type:String,default:""},beforeClose:{default:null}},data(){return{sidebar:"sidebar",slide_class:""}},methods:{close(){"function"===typeof this.beforeClose?this.beforeClose(this.open):this.open(!1)},open(e){this.slide_class=e?"slide_in":"slide_out",this.$emit("SidebarOpen",!!e)}}},l=i,o=(a("dd9f"),a("2877")),n=Object(o["a"])(l,s,r,!1,null,null,null);t["default"]=n.exports},"5f72":function(e,t){e.exports=ELEMENT},"61fa":function(e,t,a){},6389:function(e,t){e.exports=VueRouter},"69b2":function(e,t,a){"use strict";t["a"]={web_name:"分布式污水流量管理系统",web_domain:"http://103.27.4.146:3001",name_reg:/^[a-z\u4e00-\u9fa5]{3,10}$/i,name_txt:"3至10个英文或中文字符",pass_reg:/^(?=.*[a-z])(?=.*\d)[a-z\d]{6,12}$/i,defaultPassword:"88888888888a",pass_txt:"6至12个英文和数字组成的字符",email_reg:/^[a-z\d]+([-_.][a-z\d]+)*@([a-z\d]+[-.])+[a-z]{2,3}$/,email_txt:"请输入正确邮箱地址",pic_reg:/^(https?:\/\/|\/upFile\/)/i,pic_txt:"头像地址不正确！",upFile_maxSize:52428800,upFile_accept:/^image\//,user_type:{0:"未审核用户",1:"超级管理员",2:"普通管理员",3:"VIP用户",4:"普通用户"},page_grade:{changePassword:4,listSort:4,updateSort:4,deleteSort:4,batchDelSort:4,delFile:4,upFile:4,listUpFile:4,listUser:4,updateUser:2,passedUser:2,deleteUser:2,listArticle:4,updateArticle:4,passedArticle:2,deleteArticle:2},sort_type:{news:"新闻",article:"文章",course:"教程"},deal_results:{lack:"#失败：参数错误！",nobody:"#失败：查无此用户！",errCode:"#失败：激活码错误！",failed:"#失败：更新数据异常！",success:"恭喜您#成功！可以登录了。"},mixin:{methods:{dealUserInfo:function(e){this.hasOwnProperty("userInfo")&&(this.userInfo=e);const t=this.grade;if(t){const s=this.page_grade;for(var a in t)t.hasOwnProperty(a)&&(t[a]=e.user_type>s[a])}}},created:function(){this.dealUserInfo(this.$store.state.data)},watch:{"$store.state.data":"dealUserInfo"}}}},7092:function(e,t,a){},"7c55":function(e,t,a){"use strict";var s=a("5c48"),r=a.n(s);r.a},"7d05":function(e,t,a){},"8bbf":function(e,t){e.exports=Vue},"9b5e":function(e,t,a){"use strict";var s=a("61fa"),r=a.n(s);r.a},ab3e:function(e,t,a){"use strict";a.r(t);var s=a("bc3a"),r=a.n(s),i=a("b383"),l=a.n(i),o=a("323e"),n=a.n(o),d=(a("a5d8"),a("5d2d"));function u(e,t,a,s=function(){}){n.a.start();let i="application/x-www-form-urlencoded; charset=UTF-8";"[object FormData]"===Object.prototype.toString.call(t)?i="multiple/form-data":"json"===t.contentType?(i="application/json;charset=utf-8",t=t.data):t=l.a.stringify(t),r()({method:"post",url:e,data:t,onUploadProgress:e=>{s.call(this,Math.round(100*e.loaded/e.total))},headers:{"Content-Type":i}}).then(e=>{return e=e||{status:404,statusText:"服务器出错！"},200===e.status||304===e.status||400===e.status?e:{status:e.status,data:{success:!1,data:{},message:e.statusText}}}).then(e=>{let t;e.data&&!e.data.success&&(t=e.data.message,this.$message({message:t,type:"error"}),t.includes("token")&&(d["default"].remove("userInfo"),location.href="/login")),t||"object"===typeof e.data.data||console.error("返回对象不能为空！"),a.call(this,t?null:e.data.data,t)}).catch(e=>{console.log("代码有问题：",e)})}r.a.defaults.timeout=3e3,r.a.defaults.baseURL="/api",r.a.interceptors.request.use(e=>{return e.headers.authorization=d["default"].get("userInfo").token||"",n.a.start(),e},e=>{return console.error(e),Promise.reject(e)}),r.a.interceptors.response.use(e=>{return n.a.done(),e},e=>{return n.a.done(),Promise.resolve(e.response)}),t["default"]=u},ab55:function(e,t,a){"use strict";var s=a("c232"),r=a.n(s);r.a},ae49:function(e,t,a){},c232:function(e,t,a){},dd9f:function(e,t,a){"use strict";var s=a("47b9"),r=a.n(s);r.a},e335:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file",name:"file",accept:e.upload.accept},on:{change:e.upFile}})},r=[],i=a("ed08"),l=a("69b2"),o={name:"upFile",props:{upload:{type:Object,required:!0,validator:e=>{return e.accept=e.accept||"image/gif, image/jpeg, image/jpg, image/png",e.disabled=e.disabled||!1,"[object Object]"===Object.prototype.toString.call(e)}}},data(){return this.upload},methods:{upFile(e){const t=e.target.files;if(!t)return;let a=new window.FormData,s=t[0];a.append("file",s),l["a"].upFile_accept.test(s.type)?s.size>l["a"].upFile_maxSize?this.$message("上传文件大小超出！"):i["a"].ajax.call(this,"/upFile",a,(e,t)=>{t||this.$emit("successUpload",e)},e=>{this.$emit("progress",e)}):this.$message("非法上传文件格式！")},SelectFile(){this.upload.disabled||(this.$refs.input.value=null,this.$refs.input.click())}}},n=o,d=a("2877"),u=Object(d["a"])(n,s,r,!1,null,null,null);t["default"]=u.exports},ed08:function(e,t,a){"use strict";function s(e,t){let a,s,r=Object.prototype.toString.call(t);if("[object Date]"===r)a=t;else{if("[object String"!==r||!(s=t.match(/(\d{4})[-\/](\d{1,2})[-\/](\d{1,2})(?:\s+(\d{1,2}):(\d{1,2}):(\d{1,2}))?/)))return"";s=s.slice(0,s[4]?7:4),s[2]=s[2]-1,a=new(Function.prototype.bind.apply(Date,s))}const i={yyyy:a.getFullYear(),yy:(""+a.getFullYear()).slice(-2),m:a.getMonth()+1,mm:("0"+(a.getMonth()+1)).slice(-2),d:a.getDate(),dd:("0"+a.getDate()).slice(-2),h:a.getHours(),hh:("0"+a.getHours()).slice(-2),f:a.getMinutes(),ff:("0"+a.getMinutes()).slice(-2),s:a.getSeconds(),ss:("0"+a.getSeconds()).slice(-2),w:["日","一","二","三","四","五","六"][a.getDay()]};return(""+e).replace(/([a-z]+)/gi,function(e){return i[e.toLowerCase()]||""})}t["a"]={storage:a("5d2d").default,ajax:a("ab3e").default,formatDate:s}},efed:function(e,t,a){"use strict";var s=a("32f7"),r=a.n(s);r.a},f640:function(e,t,a){"use strict";var s=a("ae49"),r=a.n(s);r.a}});
//# sourceMappingURL=app.js.map